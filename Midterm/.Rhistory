#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(year, ~paste(., "_gdpPercap"))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(., "_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(."_gdpPercap"))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(,"_gdpPercap"))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
str_squish()
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
str_squish(string)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
str_squish(year)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
str_squish()
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish())
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish())
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish)
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
pivot_wider(names_from = year,
values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish) %>%
pivot_wider(names_from = year,
values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish) %>%
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_squish)# %>%
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_replace(" ", ""))# %>%
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(vars(year), str_replace(" ",""))# %>%
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
mutate_at(year = str_replace(" ",""))# %>%
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), str_trim())
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), str_trim(year))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), str_trim)
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), str_trim)
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), str_trim) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap"))
#pivot_wider(names_from = year,
#values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
pivot_wider(names_from = year,
values_from = gdpPercap)
library(tidyverse)
library(gapminder)
options(scipen=999) #disables scientific notation when printing
library(tidyverse)
library(gapminder)
options(scipen=999) #disables scientific notation when printing
detach("package:dplyr", unload = TRUE)
gapminder %>%
select(year, pop, country)
knitr::opts_chunk$set(echo = TRUE)
#install.packages("gapminder")
library(tidyverse)
library(gapminder)
options(scipen=999) #disables scientific notation when printing
dim(gapminder)
names(gapminder)
lapply(gapminder, class)
anyNA(gapminder)
gapminder <- gapminder
gapminder
gapminder_long <- gapminder %>%
pivot_longer(-c(country, year, continent),
names_to = "measured_value",
values_to = "observation_value") %>%
unite("observation_year", measured_value, year, sep = "_")
gapminder_long
gapminder_long %>%
separate(observation_year, into=c("observation", "year"), sep = "_") %>%
pivot_wider(names_from = observation,
values_from = observation_value)
gapminder_wide <- gapminder_long %>%
pivot_wider(names_from = observation_year, values_from = observation_value)
gapminder_wide
gapminder_wide %>%
pivot_longer(-c(country, continent),
names_to = "observation_year",
values_to = "observation_value") %>%
separate(observation_year, into=c("observation", "year"), sep = "_") %>%
pivot_wider(names_from = observation,
values_from = observation_value)
gapminder_wide %>%
summarize(count_country = n_distinct(country), count_continent = n_distinct(continent))
library(dplyr)
knitr::opts_chunk$set(echo = TRUE)
#install.packages("gapminder")
library(tidyverse)
library(gapminder)
options(scipen=999) #disables scientific notation when printing
dim(gapminder)
names(gapminder)
lapply(gapminder, class)
anyNA(gapminder)
gapminder <- gapminder
gapminder
gapminder_long <- gapminder %>%
pivot_longer(-c(country, year, continent),
names_to = "measured_value",
values_to = "observation_value") %>%
unite("observation_year", measured_value, year, sep = "_")
gapminder_long
gapminder_long %>%
separate(observation_year, into=c("observation", "year"), sep = "_") %>%
pivot_wider(names_from = observation,
values_from = observation_value)
gapminder_wide <- gapminder_long %>%
pivot_wider(names_from = observation_year, values_from = observation_value)
gapminder_wide
gapminder_wide %>%
pivot_longer(-c(country, continent),
names_to = "observation_year",
values_to = "observation_value") %>%
separate(observation_year, into=c("observation", "year"), sep = "_") %>%
pivot_wider(names_from = observation,
values_from = observation_value)
gapminder_wide %>%
summarize(count_country = n_distinct(country), count_continent = n_distinct(continent))
levels(gapminder_wide$country)
levels(gapminder_wide$continent)
gapminder_wide %>%
group_by(continent) %>%
summarize(number_of_countries = n_distinct(country))
gapminder %>%
select(continent, lifeExp) %>%
group_by(continent) %>%
summarize(mean_lifeExp = mean(lifeExp)) %>%
arrange(desc(mean_lifeExp))
gapminder %>%
select(country, year, lifeExp)
gapminder %>%
select(country, year, lifeExp) %>%
filter(str_detect(country, "United States"))
gapminder11 <- gapminder %>%
filter(year == 2007) %>%
filter(lifeExp >= 70 & lifeExp <= 75) %>%
droplevels
levels(gapminder11$country)
gapminder %>%
filter(continent == "Europe" | continent == "Americas") %>%
filter(year == 1997) %>%
summarize(mean_lifeExp = mean(lifeExp), maximum_lifeExp = max(lifeExp), minimum_lifeExp = min(lifeExp))
gapminder %>%
select(year, pop, country)
filter(year == 1952) %>%
arrange(pop)
gapminder %>%
select(year, pop, country) %>%
filter(year == 1952) %>%
arrange(pop)
gapminder %>%
select(country, year, pop) %>%
filter(year == 1952) %>%
arrange(pop)
gapminder %>%
select(country, year, pop) %>%
filter(year == 2007) %>%
arrange(pop)
View(fisheries)
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year %in% c(1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
coastal_fish %>%
group_by(country)
coastal_fish %>%
group_by(country) %>%
summarize(count = count(n_distinct(ASFIS_spcode)))
coastal_fish %>%
group_by(country)
coastal_fish
coastal_fish <- fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == 'Miscellaneous coastal fishes')
coastal_fish
coastal_fish %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname))
coastal_fish %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname)) %>%
arrange(desc(types_of_fish))
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), paste(.,"_gdpPercap")) %>%
pivot_wider(names_from = year,
values_from = gdpPercap)
gapminder_middleEast %>%
select(country, continent, year, gdpPercap, region) %>%
mutate_at(vars(year), ~paste(.,"_gdpPercap")) %>%
pivot_wider(names_from = year,
values_from = gdpPercap)
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname, "Cephalopoda")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname contains("Cephalopoda")) %>%
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv") %>%
mutate_all(~str_replace_all(., " F", "")) %>%
mutate_all(str_trim) %>%
mutate_at(vars(starts_with("19",)), ~str_replace_all(., " ", "")) %>%
mutate_at(vars(starts_with("2")), ~str_replace_all(., " ", ""))
colnames(fisheries)
sapply(fisheries, class)
fisheries <- fisheries %>%
mutate_at(vars(starts_with("19")), as.numeric) %>%
mutate_at(vars(starts_with("2")), as.numeric) %>%
mutate_if(is.character, as.factor)
sapply(fisheries, class)
nlevels(fisheries$Country)
levels(fisheries$Country)
fisheries <- fisheries %>%
rename(country = 'Country', commname = 'Common name', ASFIS_sciname = "ASFIS species name", ASFIS_spcode = 'ASFIS species#', ISSCAAP_spgroupname = 'ISSCAAP taxonomic group', ISSCAAP_spgroup = `ISSCAAP group#`, FAO_area = 'FAO major fishing area', unit = 'Measure')
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country, commname, ASFIS_spcode, ASFIS_sciname, ISSCAAP_spgroupname, ISSCAAP_spgroup, FAO_area, unit),
names_to = "year",
values_to = "catch")
fisheries_tidy2 <- fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ISSCAAP_spgroup, ASFIS_spcode, ASFIS_sciname, year, catch)
lapply(fisheries_tidy2, class)
nlevels(fisheries_tidy2$ASFIS_spcode)
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
View(fisheries_tidy2)
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(str_detect(ASFIS_sciname, "Cephalopoda")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange((catch_total))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ISSCAAP_spgroupname) %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange((catch_total))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange((catch_total))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year %in% c(2008, 2009, 2010, 2011, 2012)) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(catch_total)
fisheries_tidy2 <- fisheries_tidy %>%
select(country, ISSCAAP_spgroupname, ISSCAAP_spgroup, ASFIS_spcode, ASFIS_sciname, year, catch) %>%
mutate_at(vars(year), as.numeric)
lapply(fisheries_tidy2, class)
nlevels(fisheries_tidy2$ASFIS_spcode)
fisheries_tidy2 %>%
filter(year == "2000") %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year <= 2000 & year >= 1990) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year <= 2000 & year >= 1990)
fisheries_tidy2 %>%
select(country, catch, year, ASFIS_sciname) %>%
filter(str_detect(ASFIS_sciname, "Sardina")) %>%
filter(year <= 2000 & year >= 1990) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <= 2012 & year >= 2008)) %>%
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <= 2012 & year >= 2008) %>%
group_by(country) %>%
summarize(catch = sum(catch, na.rm = T)) %>%
arrange(desc(catch, by.group = TRUE))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <= 2012 & year >= 2008) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy2 %>%
filter(str_detect(ISSCAAP_spgroupname, "Squids")) %>%
filter(year <= 2012 & year >= 2008) %>%
group_by(ASFIS_sciname) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(catch_total)
coastal_fish <- fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == 'Miscellaneous coastal fishes')
coastal_fish <- fisheries_tidy2 %>%
filter(ISSCAAP_spgroupname == 'Miscellaneous coastal fishes')
lapply(fisheries_tidy2, class)
coastal_fish %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname)) %>%
arrange(desc(types_of_fish))
coastal_fish %>%
filter(year == 2000)
coastal_fish %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname)) %>%
arrange(desc(types_of_fish))
coastal_fish %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname)) %>%
arrange(desc(types_of_fish))
coastal_fish %>%
group_by(country) %>%
summarize(types_of_fish = n_distinct(ASFIS_sciname)) %>%
arrange(desc(types_of_fish))
View(gapminder)
library(tidyverse)
options(scipen=999) #disables scientific notation when printing
library(tidyverse)
options(scipen=999) #disables scientific notation when printing
leukemia <- readr::read_csv("data/leukemia_big.csv")
View(leukemia)
